<div fxLayout="column" fxLayoutGap="4px" style="height: 92vh; overflow: hidden;">
  <!-- Controls in a single row -->
  <div fxLayout="row" fxLayoutAlign="start center" fxLayoutap="20px" class="same-height-row">
    <!-- Dropdown -->
    <!-- <mat-form-field appearance="fill" fxFlex="20%" class="same-height" *ngIf="false" >
      <mat-label>Source</mat-label>
      <mat-select [(ngModel)]="selected_source" required>
        <mat-option *ngFor="let column of source_columns" [value]="column">
          {{ column }}
        </mat-option>
      </mat-select>
    </mat-form-field> -->
      <mat-select class="custom-mat-select"  [(ngModel)]="selectedTask" required (selectionChange)="onTaskChange($event)">
        <mat-option *ngFor="let task of tasks" [value]="task.code">
          {{ task.value }}
        </mat-option>
      </mat-select>

    <!-- Grouped Elements: Generic Search Component and Search Database Button -->
    <app-generic-search (triggerParentMethod)="onChildEvent()" fxFlex="30%" [sp]="'sp_SearchJob'" [tableName]="'job'"
      [columns]="['Search Any', 'vms_job_id', 'job_id', 'client', 'company_name', 'title']" class="right-aligned">
    </app-generic-search>


  </div>



  <!-- Grid -->
  <div style="overflow-y: auto;">
    <app-dynamic-grid [table_name]="table_name" [api_end_point]="api_end_point" [sp]="sp"
      [display_on_load]="display_on_load">
    </app-dynamic-grid>
  </div>

  <div >
    <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="20px" class="same-height-row" style="flex-shrink: 0;">
      <button style="margin-right: auto;" (click)="toggleButtons()">Toggle</button>
    <button mat-raised-button color="primary" (click)="onClickRefreshJobs()"
      [class.spinner]="onClickRefreshJobsWaitCursor" [disabled]="onClickRefreshJobsWaitCursor" class="same-height">
      Refresh Grid
    </button>
    <button mat-raised-button color="primary" (click)="showJobsByDistance()" class="same-height">Matching Jobs
    </button>
    <button mat-raised-button color="primary" (click)="onClickText()" class="same-height">
      Text Jobs
    </button>

</div>
    <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="20px" class="same-height-row" style="flex-shrink: 0;"
      *ngIf="showButtons">

      <!-- Updated Buttons -->
      <button mat-raised-button color="warn" (click)="onClickPostToCeipal()" class="same-height">
        Post Jobs to Ceipal
      </button>
      <button mat-raised-button color="warn" (click)="onClickGetCeipalJobs()"
        [class.spinner]="onClickSearchCeipalJobsWaitCursor" [disabled]="onClickSearchCeipalJobsWaitCursor"
        class="same-height">
        Get New Jobs from Ceipal
      </button>
      <!-- <button mat-raised-button color="warn" (click)="onClickSearchCandidates()" class="same-height">
      Search Web Registry
    </button> -->
      <button mat-raised-button color="warn" (click)="onClickSmartSearch()" class="same-height">
        Search Job
      </button>

      <button mat-raised-button color="warn" (click)="onClickElasticSearch()" class="same-height">
        Search Ceipal
      </button>

      <app-file-upload [buttonLabel]="'Upload Aya Jobs'" (csvParsed)="handleCsvData($event)"></app-file-upload>
      <button mat-raised-button color="primary" (click)="openFacebookPostDialog()" class="same-height">
        Travel Nurse Facebook Post
      </button>

      <button mat-raised-button color="warn" (click)="onClickClusterJobs()"
        [class.spinner]="onClickClusterJobsWaitCursor" [disabled]="onClickClusterJobsWaitCursor" class="same-height">
        Cluster Jobs
      </button>

      <button mat-raised-button color="warn" (click)="copyNuccClassificationToFilteredRows()" class="same-height">
        Copy Classification From Selected
      </button>
      <button mat-raised-button color="warn" (click)="matchMissingClassification()" class="same-height">
        Match Missing Classification
      </button>
    </div>

  </div>
</div>